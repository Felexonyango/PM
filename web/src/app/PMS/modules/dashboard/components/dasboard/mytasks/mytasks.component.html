<div class="animated fadeIn">
    <div class="card">
        <div class="table-responsive">
            <p-table [value]="tasks" #table>
                <ng-template pTemplate="caption">
                    <div class="grid" style="display: flex; align-items: center">
                        <div style="margin-right: 5px; margin-left: 10px;">
                            <app-avatar-generator
                                [name]="utilService.getUserFirstName()"
                                [circleSize]="'30'"
                                [circleColor]="user?.profileBgColor"
                                [initialsSize]="'.8'"
                                [showName]="true"
                            ></app-avatar-generator>
                        </div>
                        <h6 style="display: flex; align-items: center">
                            My Tasks
                            <i
                                class="pi pi-unlock"
                                style="font-size: 1rem; margin-left: 5px"
                            ></i>
                        </h6>
                    </div>
                </ng-template>

                <ng-template pTemplate="header">
                    <tr>
                        <th
                            *ngFor="let column of tableColumns"
                            [pSortableColumn]="column?.fieldName"
                        >
                            {{ column?.displayName }}
                            <p-sortIcon
                                [field]="column?.fieldName"
                            ></p-sortIcon>
                        </th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-task>
                    <tr>
                        <td>
                            {{ task?.name }}
                        </td>
                        <td>
                            {{ task?.description }}
                        </td>

                        <td>
                            <span>
                                {{ task?.dueDate | date : "medium" }}
                            </span>
                        </td>

                        <td>{{ task?.createdAt | date : "medium" }}</td>
                        <td>{{ task?.status }}</td>

                        <td>
                            <p-splitButton
                                label="Details"
                                icon="pi pi-folder-open"
                                (onClick)="
                                    router.navigate([
                                        '/tasks/details-task',
                                        task?._id
                                    ])
                                "
                                [model]="task?.menuItems"
                                styleClass="mr-2"
                            >
                            </p-splitButton>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
